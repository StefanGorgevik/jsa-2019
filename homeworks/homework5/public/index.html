    
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        body {
            background-image: url(https://previews.123rf.com/images/romastudio/romastudio1603/romastudio160300203/54088672-healthy-food-background-studio-photo-of-different-fruits-and-vegetables-on-white-wooden-table-high-r.jpg); 
            background-repeat: no-repeat;
            background-size: cover;
        }
        button {
            margin-left: 50px;
            margin-bottom: 20px;
            
        }
        table {
            width: 50%;
            margin-left: 50px;
            margin-bottom: 10px;
            position:relative;
        }
        table, th{
            border: 2px solid black;
        }
        tr {
            border: 1px solid black;
        }
        #inputDiv {
            margin-left: 50px;
            display: grid;
            justify-content: first baseline;
            border: 2px solid black;
            width: 15%;
            padding-left: 10px;
            height: 150px;
            position: fixed;
            top: 125px;
            left: 800px;
        }

        input {
            position: absolute;
            grid-column: 1;
            grid-row: 1;
            display: inline-block;
            
        }
        label {
            margin-right: 15px;
            margin-top: 10px;
        }

        #addButton {
            position: fixed;
            top: 300px;
            left: 800px;    
            width: 130px;
        }

        #idInput {
            margin-left: 38px;
        }

        #nameInput{
            margin-left: 17px;
        }

        #priceInput{
            margin-left: 23px;
        }

        #calInput {
            margin-left:2px;
        }

        .class1 {
            text-align: center;
        }

    </style>
</head>
<body>
    <h1>Food list</h1>
    <button id="get-food-btn">Get Food</button>
    <button id="refreshBtn">Refresh</button>
    <button id="dltButton">Delete row!</button>

    <table id="table" border="1" >
		<tr>
			<th>ID</th>
			<th>Name</th>
			<th>Price</th>
			<th>Calories</th>
	
		</tr>
    </table>
    
<div id="inputDiv">

    <label>ID<input type="text" name="id" id="idInput"></label>  
    <label>Name<input type="text" name="name" id="nameInput"></label>   
    <label>Price<input type="text" name="price" id="priceInput"></label>   
    <label>Calories<input type="text" name="calories" id="calInput"></label>   

    
</div>
<br>
<button id="addButton">Add new food!</button>
    <script>

    var table = document.querySelector("#table");
    var getFoodBtn = document.querySelector('#get-food-btn');
    var refreshBtn = document.querySelector('#refreshBtn');
    var addButton = document.querySelector("#addButton");
    var dltButton = document.querySelector("#dltButton");

        
	function refresh() {
            window.location.reload();       
           }

          var getFood = () =>{
            fetch("http://127.0.0.1:8080/food")
                .then(function(response) {
                    return response.json()
                }).then(data=>{
                    var table = document.getElementById("table");
                        for(var i = 0;i < data.length; i++) {
                            var tr = document.createElement("tr");
                            for(var j in data[i]) {
                                var td = document.createElement("td");
                                td.innerText = data[i][j];
                                var check = document.createElement("input");
                                check.setAttribute("type", "checkbox");
                                check.classList.add("class1")
                                tr.append(td);
                            }
                            table.append(tr);
                            for(let i = 0; i < table.rows.length; i ++) {
                               table.rows[i].cells[0].append(check);
                            }
                        }
                })
                .catch(function(err) {
                    console.log(err);
                });
           }
            
           getFoodBtn.addEventListener('click', getFood);
           refreshBtn.addEventListener('click', refresh);
        

        addButton.addEventListener("click", function(e) {
        var idInput = document.querySelector("#idInput").value;
        var nameInput = document.querySelector("#nameInput").value;
        var priceInput = document.querySelector("#priceInput").value;
        var calInput = document.querySelector("#calInput").value;
        var newElement = {
                id: Number(idInput),
                name: nameInput,
                price: Number(priceInput),
                calories: Number(calInput)
        };
        console.log(newElement);
        fetch('http://127.0.0.1:8080/food', {
                method: 'post',
                headers: {
                    'Accept': 'application/json, text/plain, */*',
                    'Content-Type': 'application/json'
                }, 
                body: JSON.stringify(newElement)
            });
            alert("New food item added");
            refresh();
            getFood();
        });


//brise selektrirana hrana, ne e zavrsena da brise od server!
        dltButton.addEventListener("click", function(e){
            var chk = document.getElementsByClassName("class1");  
            var trr = document.getElementsByTagName("tr");
            var arr = [];
            for(let p = 0; p < trr.length; p++){
                arr.push((trr[p].childNodes[0].textContent));
            }
            arr.shift();
            console.log(arr);
            
            for(let j = 0; j < chk.length; j++) {
                if(chk[j].checked) {
                    console.log(chk[j]);
                    chk[j].parentNode.parentNode.remove();
                    console.log("Item removed!");    
                }
            }   
});


        </script>
</body>
</html>
